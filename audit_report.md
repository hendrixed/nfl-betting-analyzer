# Audit summary for `nfl-betting-analyzer`

## Inventory

- Python modules: **50**
- Data files: **42**
- Notebooks: **0**
- Config present: pyproject.toml, requirements.txt, .env

## Dependencies

- **requirements.txt**:
  - pandas>=1.5.0
  - numpy>=1.21.0
  - scipy>=1.9.0
  - scikit-learn>=1.2.0
  - xgboost>=1.6.0
  - lightgbm>=3.3.0
  - torch>=1.12.0
  - joblib>=1.2.0
  - sqlalchemy>=2.0.0
  - psycopg2-binary>=2.9.0
  - alembic>=1.8.0
  - fastapi>=0.104.1
  - uvicorn[standard]>=0.24.0
  - websockets>=12.0
  - redis>=5.0.1
  - slowapi>=0.1.9
  - python-jose[cryptography]>=3.3.0
  - passlib[bcrypt]>=1.7.4
  - python-multipart>=0.0.6
  - flask>=2.3.0
  - flask-cors>=4.0.0
  - pydantic>=2.0.0
  - requests>=2.28.0
  - httpx>=0.24.1
  - aiohttp>=3.8.0
  - beautifulsoup4>=4.11.0
  - selenium>=4.5.0
  - nfl-data-py>=0.3.0
  - typer>=0.9.0
  - rich>=13.0.0
  - click>=8.0.0
  - pyyaml>=6.0
  - python-dotenv>=0.20.0
  - schedule>=1.2.0
  - tqdm>=4.64.0
  - python-dateutil>=2.8.0
  - pytz>=2022.1
  - pytest>=7.0.0
  - pytest-asyncio>=0.21.0
  - black>=22.0.0
  - flake8>=5.0.0
  - mypy>=0.971
  - pre-commit>=2.20.0
  - textblob>=0.17.1
  - nltk>=3.8
  - vaderSentiment>=3.3.2
  - plotly>=5.15.0
  - matplotlib>=3.6.0
  - seaborn>=0.12.0
  - bayesian-optimization>=1.4.0
  - optuna>=3.0.0
  - shap>=0.41.0
  - statsmodels>=0.14.0
  - networkx>=3.1
  - pulp>=2.7.0
  - cvxpy>=1.3.0
- **pyproject.toml:project.dependencies**:

## Models/ML libs detected

- sklearn: 8 files
- lightgbm: 2 files
- xgboost: 2 files
- torch: 1 files

## Potential issues

- Duplicate function/method bodies: **2** groups
- Possibly dead/unused defs: **142**
- Files with `if __name__ == '__main__'`: 1

## Notes


## Files

- `api/__init__.py` (loc=10) []
- `api/app.py` (loc=1165) [fastapi]
  - functions: cache_response, poisson, latest_snapshot_dir, models_available, get_db, create_access_token, verify_token, get_current_user, lifespan, real_time_update_task, root, snapshot_mock_odds ...
  - classes: PlayerInfo, EnhancedPlayerInfo, PredictionRequest, BettingAnalysisRequest, PlayerPredictionResponse, FantasyPredictionResponse, GamePredictionResponse, BettingInsight, PerformanceMetrics, RealTimePrediction, BettingRecommendation, MarketAnalysis ...
- `audit_repo.py` (loc=363) [typer argparse fastapi]
  - functions: normalize_fn_ast, analyze_python_file, walk_repo, parse_requirements, find_duplicates, estimate_dead_defs, detect_multiple_mains, gather_notes, generate_markdown, main
  - classes: FunctionInfo, ClassInfo, ModuleInfo, RepoReport
- `config/config_manager.py` (loc=435) []
  - functions: get_config, load_config, save_config, update_config
  - classes: DatabaseConfig, APIConfig, DataConfig, FeatureConfig, ModelConfig, PipelineConfig, LoggingConfig, PredictionConfig, DirectoriesConfig, ProcessingConfig, APIKeysConfig, SystemMetaConfig ...
- `config_manager.py` (loc=4) []
- `core/__init__.py` (loc=7) []
- `core/data/__init__.py` (loc=15) []
- `core/data/data_collector.py` (loc=666) []
  - functions: main
  - classes: DataCollectionConfig, NFLDataCollector, PlayerDataCollector, GameDataCollector, StatsDataCollector, BettingDataCollector
- `core/data/data_foundation.py` (loc=304) []
  - functions: merge_player_data, classify_position_group, validate_player_role_consistency
  - classes: PlayerRole, MasterPlayer, WeeklyRosterSnapshot, ValidationReport, PlayerGameValidation, TeamDepthChart, DataSourceMetrics, WeeklyDataQualityReport
- `core/data/data_processing_pipeline.py` (loc=459) []
  - functions: main
  - classes: DataQualityMetrics, ProcessingResult, NFLDataProcessingPipeline
- `core/data/data_validation_pipeline.py` (loc=505) []
  - functions: main
  - classes: ValidationRule, DataValidator, AutomatedWorkflowManager
- `core/data/data_validator.py` (loc=519) []
  - classes: ValidationSeverity, ValidationResult, DataQualityValidator, StatsValidator, ComprehensiveValidator
- `core/data/enhanced_data_collector.py` (loc=685) []
  - classes: EnhancedNFLDataCollector, RoleBasedStatsCollector
- `core/data/ingestion_adapters.py` (loc=921) []
  - functions: main
  - classes: PlayerRoster, GameSchedule, PlayerStats, InjuryReport, WeatherData, BettingLine, CacheManager, BaseAdapter, NFLDataPyAdapter, WeatherAdapter, UnifiedDataIngestion
- `core/data/market_mapping.py` (loc=110) []
  - functions: normalize_book, normalize_market, to_internal
- `core/data/nfl_2025_data_collector.py` (loc=391) []
  - functions: main
  - classes: PlayerInfo, TeamInfo, NFL2025DataCollector
- `core/data/odds_snapshot.py` (loc=140) []
  - functions: ensure_snapshot_dir, write_mock_odds_snapshot
- `core/data/statistical_computing_engine.py` (loc=541) []
  - functions: main
  - classes: PlayerTrends, TeamAnalytics, GameContext, NFLStatisticalComputingEngine
- `core/database_models.py` (loc=546) []
  - functions: create_all_tables, get_db_session, migrate_database, validate_player_status
  - classes: Player, BettingLine, FeatureStore, HistoricalValidationReport, Team, Game, ModelPerformance, PlayerGameStats, PlayerPrediction, GamePrediction, PlayerIdentityMapping, StatTerminologyMapping ...
- `core/models/__init__.py` (loc=25) []
- `core/models/feature_engineering.py` (loc=993) []
  - functions: main
  - classes: FeatureSet, ModelFeatures, NFLFeatureEngineer
- `core/models/prediction_models.py` (loc=803) []
  - functions: main
  - classes: ModelPerformance, PredictionResult, ModelEnsemble, ModelConfig, NFLPredictionModel, EnsembleModel, NFLPredictionEngine
- `core/models/streamlined_models.py` (loc=558) []
  - functions: main
  - classes: ModelResult, PredictionResult, StreamlinedNFLModels
- `core/prediction_bounds.py` (loc=167) []
  - classes: PredictionBoundsValidator
- `data_collector.py` (loc=4) []
- `data_foundation.py` (loc=4) []
- `database_models.py` (loc=5) []
- `feature_engineering.py` (loc=806) []
  - functions: main
  - classes: FeatureConfig, AdvancedFeatureEngineer
- `generate_coverage_matrices.py` (loc=288) []
  - functions: generate_stats_feature_matrix, generate_model_market_matrix, validate_coverage_with_real_data, main
- `load_nfl_schedule.py` (loc=324) []
  - functions: main
  - classes: NFLScheduleLoader
- `ml_models.py` (loc=923) []
  - functions: main
  - classes: ModelConfig, PredictionTarget, NFLPredictor, BaseMLModel, XGBoostModel, LightGBMModel, RandomForestModel, GradientBoostingModel, NeuralNetworkModel, NFLNeuralNetwork, EnsembleModel
- `model_evaluation.py` (loc=826) []
  - functions: run_rolling_backtest, main
  - classes: EvaluationConfig, PredictionResult, EvaluationMetrics, NFLModelEvaluator
- `nfl_cli.py` (loc=1069) [typer]
  - functions: main, fetch, models_status, sync_roster, players_audit, foundation, snapshot_verify, odds_snapshot, features, train, project, sim ...
- `prediction_pipeline.py` (loc=831) []
  - functions: main
  - classes: PipelineConfig, NFLPredictionPipeline
- `tests/conftest.py` (loc=7) []
- `tests/test_betting_props.py` (loc=23) [fastapi]
  - functions: test_admin_snapshot_and_props_offers
- `tests/test_complete_system.py` (loc=351) []
  - functions: main
  - classes: SystemValidator
- `tests/test_data_validation.py` (loc=137) []
  - functions: mock_session, data_quality_validator, stats_validator, sample_master_player
  - classes: TestDataQualityValidator, TestStatsValidator
- `tests/test_feature_engineering.py` (loc=534) []
  - functions: mock_session, mock_cache_manager, feature_engineer, sample_player, sample_game_stats, sample_games
  - classes: TestNFLFeatureEngineer, TestFeatureIntegration
- `tests/test_feature_engineering_simple.py` (loc=163) []
  - classes: TestFeatureEngineeringCore
- `tests/test_market_mapping.py` (loc=28) []
  - functions: test_book_normalization_variants, test_market_normalization_variants, test_to_internal_ok, test_to_internal_unknown_market
- `tests/test_prediction_models.py` (loc=481) []
  - functions: temp_models_dir, mock_feature_engineer, sample_model_features, sample_model_config
  - classes: TestModelConfig, TestNFLPredictionModel, TestEnsembleModel, TestNFLPredictionEngine, TestDeterministicBehavior
- `tests/test_schema_comprehensive.py` (loc=233) []
  - functions: latest_snapshot_dir, read_csv_safe, validate_columns, validate_no_nulls, test_reference_teams_schema, test_reference_stadiums_schema, test_reference_players_schema, test_rosters_schema, test_depth_charts_schema, test_injuries_schema, test_schedule_schema, test_snaps_schema ...
- `tests/test_schema_games_usage.py` (loc=66) []
  - functions: latest_snapshot_dir, read_header, test_schedule_schema, test_snaps_schema, test_pbp_schema, test_weather_schema, test_odds_schema
- `tests/test_schema_reference.py` (loc=51) []
  - functions: latest_snapshot_dir, read_header, test_reference_teams_schema, test_reference_stadiums_schema, test_reference_players_schema
- `tests/test_schema_rosters_depth_injuries.py` (loc=81) []
  - functions: latest_snapshot_dir, read_rows, test_rosters_schema_and_pk, test_depth_charts_schema, test_injuries_schema
- `tests/test_system.py` (loc=321) []
  - classes: TestSystemImports, TestDatabaseModels, TestConfigurationSystem, TestPredictionSystem, TestValidationFramework, TestCoverageValidation, TestDataIntegrity, TestPerformanceAndReliability, TestSystemIntegration
- `validation_backtesting_framework.py` (loc=681) []
  - functions: main
  - classes: ValidationBacktestingFramework
- `verify_environment.py` (loc=104) []
  - functions: verify_conda_environment, setup_project_paths
- `web/__init__.py` (loc=4) []

## Data files
- data/snapshots/2025-09-09/depth_charts.csv
- data/snapshots/2025-09-09/injuries.csv
- data/snapshots/2025-09-09/odds.csv
- data/snapshots/2025-09-09/pbp.csv
- data/snapshots/2025-09-09/players.csv
- data/snapshots/2025-09-09/reference_players.csv
- data/snapshots/2025-09-09/reference_stadiums.csv
- data/snapshots/2025-09-09/reference_teams.csv
- data/snapshots/2025-09-09/rosters.csv
- data/snapshots/2025-09-09/schedule.csv
- data/snapshots/2025-09-09/schedules.csv
- data/snapshots/2025-09-09/snaps.csv
- data/snapshots/2025-09-09/snaps_usage.csv
- data/snapshots/2025-09-09/stadiums.csv
- data/snapshots/2025-09-09/teams.csv
- data/snapshots/2025-09-09/weather.csv
- data/snapshots/2025-09-09/weekly_stats.csv
- data/snapshots/2025-W1-snaps/snap_counts.parquet
- data/snapshots/2025-schedule/schedules.parquet
- models/performance/QB_fantasy_points_model_performance.json
- models/performance/QB_passing_touchdowns_model_performance.json
- models/performance/QB_passing_yards_model_performance.json
- models/performance/RB_fantasy_points_model_performance.json
- models/performance/RB_receiving_yards_model_performance.json
- models/performance/RB_rushing_touchdowns_model_performance.json
- models/performance/RB_rushing_yards_model_performance.json
- models/performance/TE_fantasy_points_model_performance.json
- models/performance/TE_receiving_yards_model_performance.json
- models/performance/TE_receptions_model_performance.json
- models/performance/WR_fantasy_points_model_performance.json
- models/performance/WR_receiving_touchdowns_model_performance.json
- models/performance/WR_receiving_yards_model_performance.json
- models/performance/WR_receptions_model_performance.json
- models/streamlined/QB_fantasy_points_ppr_ridge.pkl.meta.json
- models/streamlined/RB_fantasy_points_ppr_ridge.pkl.meta.json
- models/streamlined/TE_fantasy_points_ppr_ridge.pkl.meta.json
- models/streamlined/WR_fantasy_points_ppr_ridge.pkl.meta.json
- reports/backtests/player_rec_yds/backtest_results_20250909_153905.json
- reports/backtests/player_rec_yds/backtest_results_20250909_170832.json
- reports/coverage/coverage_validation.json
- reports/coverage/model_market_matrix.csv
- reports/coverage/stats_feature_matrix.csv

## Duplicate bodies (same AST hash)
- 28e8725a90… :
  - tests/test_schema_reference.py:latest_snapshot_dir@7
  - tests/test_schema_rosters_depth_injuries.py:latest_snapshot_dir@7
  - tests/test_schema_games_usage.py:latest_snapshot_dir@7
- f6fc328b32… :
  - tests/test_schema_reference.py:read_header@14
  - tests/test_schema_games_usage.py:read_header@13

## Possibly unused definitions
- APIConfig
- APIKeysConfig
- AutomatedWorkflowManager
- BaseAdapter
- BaseMLModel
- BettingAnalysisRequest
- BettingDataCollector
- BettingLine
- BettingRecommendation
- ClassInfo
- ComprehensiveValidator
- ConnectionManager
- DataConfig
- DatabaseConfig
- DirectoriesConfig
- EnhancedNFLDataCollector
- EnhancedPlayerInfo
- EvaluationMetrics
- FeatureSet
- GameDataCollector
- GameSchedule
- GradientBoostingModel
- HistoricalDataStandardization
- HistoricalValidationReport
- InjuryReport
- LightGBMModel
- LoggingConfig
- MarketAnalysis
- ModelEnsemble
- ModelResult
- NFL2025DataCollector
- NFLDataProcessingPipeline
- NFLPredictionPipeline
- NFLScheduleLoader
- NeuralNetworkModel
- PipelineConfig
- PlayerDataCollector
- PlayerGameValidation
- PlayerIdentityMapping
- PlayerRole
- PlayerRoster
- PlayerStats
- PredictionBoundsValidator
- PredictionConfig
- PredictionRequest
- ProcessingConfig
- RandomForestModel
- RealTimePrediction
- RepoReport
- RoleBasedStatsCollector
- StatTerminologyMapping
- StatsDataCollector
- SystemMetaConfig
- SystemValidator
- TeamDepthChart
- TestConfigurationSystem
- TestCoverageValidation
- TestDataIntegrity
- TestDataQualityValidator
- TestDatabaseModels
- TestDeterministicBehavior
- TestEnsembleModel
- TestFeatureEngineeringCore
- TestFeatureIntegration
- TestModelConfig
- TestNFLFeatureEngineer
- TestNFLPredictionEngine
- TestNFLPredictionModel
- TestPerformanceAndReliability
- TestPredictionSystem
- TestStatsValidator
- TestSystemImports
- TestSystemIntegration
- TestValidationFramework
- ValidationReport
- ValidationSeverity
- WeeklyDataQualityReport
- WeeklyRosterSnapshot
- XGBoostModel
- backtest
- classify_position_group
- create_access_token
- data_quality_validator
- detailed_health_check
- feature_engineer
- fetch
- foundation
- general_exception_handler
- get_betting_insights
- get_current_user
- get_db
- get_enhanced_player_prediction
- get_game_predictions
- get_games
- get_models
- get_player_details
- get_player_fantasy_predictions
- get_player_predictions
- get_props
- get_stats
- get_team_roster
- get_teams
- health_check
- home
- http_exception_handler
- lifespan
- merge_player_data
- migrate_database
- mock_cache_manager
- mock_feature_engineer
- models_status
- odds_snapshot
- players_audit
- project
- root
- run_api
- run_rolling_backtest
- run_simulation
- sample_game_stats
- sample_games
- sample_master_player
- sample_model_config
- sample_model_features
- sample_player
- sim
- snapshot_mock_odds
- snapshot_verify
- stats_validator
- status
- sync_roster
- temp_models_dir
- test_admin_snapshot_and_props_offers
- test_book_normalization_variants
- test_market_normalization_variants
- test_rosters_schema
- test_rosters_schema_and_pk
- test_to_internal_ok
- test_to_internal_unknown_market
- validate_player_role_consistency
- validate_player_status
- verify_token
- websocket_endpoint